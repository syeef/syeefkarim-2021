{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/syeefkarim/Developer/syeefkarim-2021/components/chart.js\";\nimport React from \"react\";\nimport { Group } from \"@vx/group\";\nimport { AreaClosed, LinePath, Bar } from \"@vx/shape\";\nimport { withParentSize } from \"@vx/responsive\";\nimport { scaleTime, scaleLinear } from \"@vx/scale\";\nimport { LinearGradient } from \"@vx/gradient\";\nimport { PatternLines } from \"@vx/pattern\";\nimport { AxisBottom } from \"@vx/axis\";\nimport { withTooltip } from \"@vx/tooltip\";\nimport { localPoint } from \"@vx/event\";\nimport { bisector } from \"d3-array\";\nimport Tooltips from \"./tooltips\";\nimport HoverLine from \"./hoverline\";\nimport MaxPrice from \"./maxprice\";\nimport MinPrice from \"./minprice\";\nimport formatPrice from \"../utils/formatPrice\";\nimport formatDate from \"../utils/formatDate\";\n\nclass Chart extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      data,\n      parentWidth = 600,\n      parentHeight = 400,\n      margin = {},\n      tooltipData,\n      tooltipLeft,\n      tooltipTop,\n      showTooltip,\n      hideTooltip\n    } = this.props;\n    const width = parentWidth - margin.left - margin.right;\n    const height = parentHeight - margin.top - margin.bottom;\n\n    const x = d => new Date(d.time);\n\n    const y = d => d.price;\n\n    const bisectDate = bisector(d => x(d)).left;\n    const firstPoint = data[0];\n    const currentPoint = data[data.length - 1];\n    const minPrice = Math.min(...data.map(y));\n    const maxPrice = Math.max(...data.map(y));\n    const firstPrice = y(firstPoint);\n    const currentPrice = y(currentPoint);\n    const maxData = [{\n      time: x(firstPoint),\n      price: maxPrice\n    }, {\n      time: x(currentPoint),\n      price: maxPrice\n    }];\n    const minData = [{\n      time: x(firstPoint),\n      price: minPrice\n    }, {\n      time: x(currentPoint),\n      price: minPrice\n    }];\n    const xScale = scaleTime({\n      range: [0, width],\n      domain: [x(firstPoint), x(currentPoint)]\n    });\n    const yScale = scaleLinear({\n      range: [height, 0],\n      domain: [minPrice, maxPrice + 100]\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        ref: s => this.svg = s,\n        width: parentWidth,\n        height: parentHeight,\n        children: [/*#__PURE__*/_jsxDEV(LinearGradient, {\n          id: \"fill\",\n          from: \"#6086d6\",\n          to: \"#6086d6\",\n          fromOpacity: 0.2,\n          toOpacity: 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(PatternLines, {\n          id: \"dLines\",\n          height: 6,\n          width: 6,\n          stroke: \"#27273f\",\n          strokeWidth: 1,\n          orientation: [\"diagonal\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Group, {\n          top: margin.top,\n          left: margin.left,\n          children: [/*#__PURE__*/_jsxDEV(AxisBottom, {\n            data: data,\n            scale: xScale,\n            x: x,\n            top: height,\n            left: margin.left + 18,\n            numTicks: 3,\n            hideTicks: true,\n            hideAxisLine: true,\n            tickLabelComponent: /*#__PURE__*/_jsxDEV(\"text\", {\n              fill: \"#ffffff\",\n              dy: \".33em\",\n              fillOpacity: 0.3,\n              fontSize: 11,\n              textAnchor: \"middle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MaxPrice, {\n            data: maxData,\n            yText: yScale(maxPrice),\n            label: formatPrice(maxPrice) // yScale={yScale}\n            // xScale={xScale}\n            ,\n            x: x => xScale(x),\n            y: y => yScale(y)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AreaClosed, {\n            stroke: \"transparent\",\n            data: data,\n            yScale: yScale,\n            xScale: xScale,\n            x: x,\n            y: y,\n            fill: \"url(#fill)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AreaClosed, {\n            stroke: \"transparent\",\n            data: data,\n            yScale: yScale,\n            xScale: xScale,\n            x: x,\n            y: y,\n            fill: \"url(#dLines)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(LinePath, {\n            data: data,\n            yScale: yScale,\n            xScale: xScale,\n            y: y,\n            x: x,\n            stroke: \"#6086d6\",\n            strokeOpacity: \"0.8\",\n            strokeWidth: 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MinPrice, {\n            data: minData,\n            yScale: yScale,\n            xScale: xScale,\n            y: y,\n            x: x,\n            yText: yScale(minPrice),\n            label: formatPrice(minPrice)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Bar, {\n            data: data,\n            width: width,\n            height: height - margin.bottom,\n            fill: \"transparent\",\n            onMouseLeave: data => event => hideTooltip(),\n            onMouseMove: data => event => {\n              const {\n                x: xPoint\n              } = localPoint(this.svg, event);\n              const x0 = xScale.invert(xPoint);\n              const index = psectDate(data, x0, 1);\n              const d0 = data[index - 1];\n              const d1 = data[index];\n              const d = x0 - xScale(x(d0)) > xScale(x(d1)) - x0 ? d1 : d0;\n              showTooltip({\n                tooltipData: d,\n                tooltipLeft: xScale(x(d)),\n                tooltipTop: yScale(y(d))\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), tooltipData && /*#__PURE__*/_jsxDEV(HoverLine, {\n          from: {\n            x: tooltipLeft,\n            y: yScale(y(maxData[0]))\n          },\n          to: {\n            x: tooltipLeft,\n            y: yScale(y(minData[0]))\n          },\n          tooltipLeft: tooltipLeft,\n          tooltipTop: tooltipTop\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), tooltipData && /*#__PURE__*/_jsxDEV(Tooltips, {\n        yTop: tooltipTop - 12,\n        yLeft: tooltipLeft + 12,\n        yLabel: formatPrice(y(tooltipData)),\n        xTop: yScale(y(minData[0])) + 4,\n        xLeft: tooltipLeft,\n        xLabel: formatDate(x(tooltipData))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default withTooltip(Chart);","map":{"version":3,"sources":["/Users/syeefkarim/Developer/syeefkarim-2021/components/chart.js"],"names":["React","Group","AreaClosed","LinePath","Bar","withParentSize","scaleTime","scaleLinear","LinearGradient","PatternLines","AxisBottom","withTooltip","localPoint","bisector","Tooltips","HoverLine","MaxPrice","MinPrice","formatPrice","formatDate","Chart","Component","constructor","props","render","data","parentWidth","parentHeight","margin","tooltipData","tooltipLeft","tooltipTop","showTooltip","hideTooltip","width","left","right","height","top","bottom","x","d","Date","time","y","price","bisectDate","firstPoint","currentPoint","length","minPrice","Math","min","map","maxPrice","max","firstPrice","currentPrice","maxData","minData","xScale","range","domain","yScale","s","svg","event","xPoint","x0","invert","index","psectDate","d0","d1"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Group } from \"@vx/group\";\nimport { AreaClosed, LinePath, Bar } from \"@vx/shape\";\nimport { withParentSize } from \"@vx/responsive\";\nimport { scaleTime, scaleLinear } from \"@vx/scale\";\nimport { LinearGradient } from \"@vx/gradient\";\nimport { PatternLines } from \"@vx/pattern\";\nimport { AxisBottom } from \"@vx/axis\";\nimport { withTooltip } from \"@vx/tooltip\";\nimport { localPoint } from \"@vx/event\";\nimport { bisector } from \"d3-array\";\n\nimport Tooltips from \"./tooltips\";\nimport HoverLine from \"./hoverline\";\nimport MaxPrice from \"./maxprice\";\nimport MinPrice from \"./minprice\";\nimport formatPrice from \"../utils/formatPrice\";\nimport formatDate from \"../utils/formatDate\";\n\nclass Chart extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    const {\n      data,\n      parentWidth = 600,\n      parentHeight = 400,\n      margin = {},\n      tooltipData,\n      tooltipLeft,\n      tooltipTop,\n      showTooltip,\n      hideTooltip,\n    } = this.props;\n\n    const width = parentWidth - margin.left - margin.right;\n    const height = parentHeight - margin.top - margin.bottom;\n\n    const x = (d) => new Date(d.time);\n    const y = (d) => d.price;\n    const bisectDate = bisector((d) => x(d)).left;\n\n    const firstPoint = data[0];\n    const currentPoint = data[data.length - 1];\n    const minPrice = Math.min(...data.map(y));\n    const maxPrice = Math.max(...data.map(y));\n    const firstPrice = y(firstPoint);\n    const currentPrice = y(currentPoint);\n    const maxData = [\n      { time: x(firstPoint), price: maxPrice },\n      { time: x(currentPoint), price: maxPrice },\n    ];\n    const minData = [\n      { time: x(firstPoint), price: minPrice },\n      { time: x(currentPoint), price: minPrice },\n    ];\n\n    const xScale = scaleTime({\n      range: [0, width],\n      domain: [x(firstPoint), x(currentPoint)],\n    });\n    const yScale = scaleLinear({\n      range: [height, 0],\n      domain: [minPrice, maxPrice + 100],\n    });\n\n    return (\n      <div>\n        <svg\n          ref={(s) => (this.svg = s)}\n          width={parentWidth}\n          height={parentHeight}\n        >\n          <LinearGradient\n            id=\"fill\"\n            from=\"#6086d6\"\n            to=\"#6086d6\"\n            fromOpacity={0.2}\n            toOpacity={0}\n          />\n          <PatternLines\n            id=\"dLines\"\n            height={6}\n            width={6}\n            stroke=\"#27273f\"\n            strokeWidth={1}\n            orientation={[\"diagonal\"]}\n          />\n          <Group top={margin.top} left={margin.left}>\n            <AxisBottom\n              data={data}\n              scale={xScale}\n              x={x}\n              top={height}\n              left={margin.left + 18}\n              numTicks={3}\n              hideTicks\n              hideAxisLine\n              tickLabelComponent={\n                <text\n                  fill=\"#ffffff\"\n                  dy=\".33em\"\n                  fillOpacity={0.3}\n                  fontSize={11}\n                  textAnchor=\"middle\"\n                />\n              }\n            />\n            <MaxPrice\n              data={maxData}\n              yText={yScale(maxPrice)}\n              label={formatPrice(maxPrice)}\n              // yScale={yScale}\n              // xScale={xScale}\n              x={(x) => xScale(x)}\n              y={(y) => yScale(y)}\n            />\n            <AreaClosed\n              stroke=\"transparent\"\n              data={data}\n              yScale={yScale}\n              xScale={xScale}\n              x={x}\n              y={y}\n              fill=\"url(#fill)\"\n            />\n            <AreaClosed\n              stroke=\"transparent\"\n              data={data}\n              yScale={yScale}\n              xScale={xScale}\n              x={x}\n              y={y}\n              fill=\"url(#dLines)\"\n            />\n            <LinePath\n              data={data}\n              yScale={yScale}\n              xScale={xScale}\n              y={y}\n              x={x}\n              stroke=\"#6086d6\"\n              strokeOpacity=\"0.8\"\n              strokeWidth={1}\n            />\n            <MinPrice\n              data={minData}\n              yScale={yScale}\n              xScale={xScale}\n              y={y}\n              x={x}\n              yText={yScale(minPrice)}\n              label={formatPrice(minPrice)}\n            />\n            <Bar\n              data={data}\n              width={width}\n              height={height - margin.bottom}\n              fill=\"transparent\"\n              onMouseLeave={(data) => (event) => hideTooltip()}\n              onMouseMove={(data) => (event) => {\n                const { x: xPoint } = localPoint(this.svg, event);\n                const x0 = xScale.invert(xPoint);\n                const index = psectDate(data, x0, 1);\n                const d0 = data[index - 1];\n                const d1 = data[index];\n                const d = x0 - xScale(x(d0)) > xScale(x(d1)) - x0 ? d1 : d0;\n                showTooltip({\n                  tooltipData: d,\n                  tooltipLeft: xScale(x(d)),\n                  tooltipTop: yScale(y(d)),\n                });\n              }}\n            />\n          </Group>\n          {tooltipData && (\n            <HoverLine\n              from={{\n                x: tooltipLeft,\n                y: yScale(y(maxData[0])),\n              }}\n              to={{\n                x: tooltipLeft,\n                y: yScale(y(minData[0])),\n              }}\n              tooltipLeft={tooltipLeft}\n              tooltipTop={tooltipTop}\n            />\n          )}\n        </svg>\n        {tooltipData && (\n          <Tooltips\n            yTop={tooltipTop - 12}\n            yLeft={tooltipLeft + 12}\n            yLabel={formatPrice(y(tooltipData))}\n            xTop={yScale(y(minData[0])) + 4}\n            xLeft={tooltipLeft}\n            xLabel={formatDate(x(tooltipData))}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default withTooltip(Chart);\n"]},"metadata":{},"sourceType":"module"}