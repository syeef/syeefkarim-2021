{"ast":null,"code":"import matter from 'gray-matter';\nimport marked from 'marked';\nimport yaml from 'js-yaml';\nexport async function getAllPosts() {\n  const context = require.context('../_posts', false, /\\.md$/);\n\n  const posts = [];\n\n  for (const key of context.keys()) {\n    const post = key.slice(2);\n    const content = await import(`../_posts/${post}`);\n    const meta = matter(content.default);\n    posts.push({\n      slug: post.replace('.md', ''),\n      title: meta.data.title\n    }).filter(posts => posts.publishedDate).sort((a, b) => new Date(b.publishedDate) - new Date(a.publishedDate));\n  }\n\n  return posts;\n}\nexport async function getPostBySlug(slug) {\n  const fileContent = await import(`../_posts/${slug}.md`);\n  const meta = matter(fileContent.default);\n  const content = marked(meta.content);\n  return {\n    title: meta.data.title,\n    publishedDate: meta.data.publishedDate,\n    content: content\n  };\n}\nexport async function getConfig() {\n  const config = await import(`../config.yml`);\n  return yaml.safeLoad(config.default);\n}","map":{"version":3,"sources":["/Users/syeefkarim/Developer/syeefkarim-2020/api/index.js"],"names":["matter","marked","yaml","getAllPosts","context","require","posts","key","keys","post","slice","content","meta","default","push","slug","replace","title","data","filter","publishedDate","sort","a","b","Date","getPostBySlug","fileContent","getConfig","config","safeLoad"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,aAAnB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,IAAP,MAAiB,SAAjB;AAEA,OAAO,eAAeC,WAAf,GAA4B;AAC/B,QAAMC,OAAO,GAAGC,OAAO,CAACD,OAAR,CAAgB,WAAhB,EAA6B,KAA7B,EAAoC,OAApC,CAAhB;;AACA,QAAME,KAAK,GAAG,EAAd;;AACA,OAAI,MAAMC,GAAV,IAAiBH,OAAO,CAACI,IAAR,EAAjB,EAAgC;AAC5B,UAAMC,IAAI,GAAGF,GAAG,CAACG,KAAJ,CAAU,CAAV,CAAb;AACA,UAAMC,OAAO,GAAG,MAAM,OAAQ,aAAYF,IAAK,EAAzB,CAAtB;AACA,UAAMG,IAAI,GAAGZ,MAAM,CAACW,OAAO,CAACE,OAAT,CAAnB;AACAP,IAAAA,KAAK,CAACQ,IAAN,CAAW;AACPC,MAAAA,IAAI,EAAEN,IAAI,CAACO,OAAL,CAAa,KAAb,EAAmB,EAAnB,CADC;AAEPC,MAAAA,KAAK,EAAEL,IAAI,CAACM,IAAL,CAAUD;AAFV,KAAX,EAICE,MAJD,CAISb,KAAD,IAAWA,KAAK,CAACc,aAJzB,EAKCC,IALD,CAKM,CAACC,CAAD,EAAGC,CAAH,KAAS,IAAIC,IAAJ,CAASD,CAAC,CAACH,aAAX,IAA4B,IAAII,IAAJ,CAASF,CAAC,CAACF,aAAX,CAL3C;AAMH;;AACD,SAAOd,KAAP;AACH;AAED,OAAO,eAAemB,aAAf,CAA6BV,IAA7B,EAAkC;AACrC,QAAMW,WAAW,GAAG,MAAM,OAAQ,aAAYX,IAAK,KAAzB,CAA1B;AACA,QAAMH,IAAI,GAAGZ,MAAM,CAAC0B,WAAW,CAACb,OAAb,CAAnB;AACA,QAAMF,OAAO,GAAGV,MAAM,CAACW,IAAI,CAACD,OAAN,CAAtB;AACA,SAAO;AACHM,IAAAA,KAAK,EAAEL,IAAI,CAACM,IAAL,CAAUD,KADd;AAEHG,IAAAA,aAAa,EAAER,IAAI,CAACM,IAAL,CAAUE,aAFtB;AAGHT,IAAAA,OAAO,EAAEA;AAHN,GAAP;AAKH;AAED,OAAO,eAAegB,SAAf,GAA0B;AAC7B,QAAMC,MAAM,GAAG,MAAM,OAAQ,eAAR,CAArB;AACA,SAAO1B,IAAI,CAAC2B,QAAL,CAAeD,MAAM,CAACf,OAAtB,CAAP;AACH","sourcesContent":["import matter from 'gray-matter'\nimport marked from 'marked'\nimport yaml from 'js-yaml'\n\nexport async function getAllPosts(){\n    const context = require.context('../_posts', false, /\\.md$/)\n    const posts = []\n    for(const key of context.keys()){\n        const post = key.slice(2);\n        const content = await import(`../_posts/${post}`);\n        const meta = matter(content.default)\n        posts.push({\n            slug: post.replace('.md',''),\n            title: meta.data.title\n        })\n        .filter((posts) => posts.publishedDate)\n        .sort((a,b) => new Date(b.publishedDate) - new Date(a.publishedDate))\n    }\n    return posts;\n}\n\nexport async function getPostBySlug(slug){\n    const fileContent = await import(`../_posts/${slug}.md`)\n    const meta = matter(fileContent.default)\n    const content = marked(meta.content)    \n    return {\n        title: meta.data.title,\n        publishedDate: meta.data.publishedDate,\n        content: content\n    }\n}\n\nexport async function getConfig(){\n    const config = await import(`../config.yml`)\n    return yaml.safeLoad( config.default )\n}"]},"metadata":{},"sourceType":"module"}