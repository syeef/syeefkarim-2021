{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _toConsumableArray from \"/Users/syeefkarim/Developer/syeefkarim-2021/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/syeefkarim/Developer/syeefkarim-2021/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/syeefkarim/Developer/syeefkarim-2021/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/syeefkarim/Developer/syeefkarim-2021/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/syeefkarim/Developer/syeefkarim-2021/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/syeefkarim/Developer/syeefkarim-2021/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport { Group } from \"@vx/group\";\nimport { AreaClosed, LinePath, Bar } from \"@vx/shape\";\nimport { withParentSize } from \"@vx/responsive\";\nimport { scaleTime, scaleLinear } from \"@vx/scale\";\nimport { LinearGradient } from \"@vx/gradient\";\nimport { PatternLines } from \"@vx/pattern\";\nimport { AxisBottom } from \"@vx/axis\";\nimport { withTooltip } from \"@vx/tooltip\";\nimport { localPoint } from \"@vx/event\";\nimport { bisector } from \"d3-array\";\nimport Tooltips from \"./tooltips\";\nimport HoverLine from \"./hoverline\";\nimport MaxPrice from \"./maxprice\";\nimport MinPrice from \"./minprice\";\nimport formatPrice from \"../utils/formatPrice\";\nimport formatDate from \"../utils/formatDate\";\n\nvar Chart = /*#__PURE__*/function (_React$Component) {\n  _inherits(Chart, _React$Component);\n\n  var _super = _createSuper(Chart);\n\n  function Chart(props) {\n    _classCallCheck(this, Chart);\n\n    return _super.call(this, props);\n  }\n\n  _createClass(Chart, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var _this$props = this.props,\n          data = _this$props.data,\n          _this$props$parentWid = _this$props.parentWidth,\n          parentWidth = _this$props$parentWid === void 0 ? 600 : _this$props$parentWid,\n          _this$props$parentHei = _this$props.parentHeight,\n          parentHeight = _this$props$parentHei === void 0 ? 400 : _this$props$parentHei,\n          _this$props$margin = _this$props.margin,\n          margin = _this$props$margin === void 0 ? {} : _this$props$margin,\n          tooltipData = _this$props.tooltipData,\n          tooltipLeft = _this$props.tooltipLeft,\n          tooltipTop = _this$props.tooltipTop,\n          showTooltip = _this$props.showTooltip,\n          hideTooltip = _this$props.hideTooltip;\n      var width = parentWidth - margin.left - margin.right;\n      var height = parentHeight - margin.top - margin.bottom;\n\n      var x = function x(d) {\n        return new Date(d.time);\n      };\n\n      var y = function y(d) {\n        return d.price;\n      };\n\n      var bisectDate = bisector(function (d) {\n        return x(d);\n      }).left;\n      var firstPoint = data[0];\n      var currentPoint = data[data.length - 1];\n      var minPrice = Math.min.apply(Math, _toConsumableArray(data.map(y)));\n      var maxPrice = Math.max.apply(Math, _toConsumableArray(data.map(y)));\n      var firstPrice = y(firstPoint);\n      var currentPrice = y(currentPoint);\n      var maxData = [{\n        time: x(firstPoint),\n        price: maxPrice\n      }, {\n        time: x(currentPoint),\n        price: maxPrice\n      }];\n      var minData = [{\n        time: x(firstPoint),\n        price: minPrice\n      }, {\n        time: x(currentPoint),\n        price: minPrice\n      }];\n      var xScale = scaleTime({\n        range: [0, width],\n        domain: [x(firstPoint), x(currentPoint)]\n      });\n      var yScale = scaleLinear({\n        range: [height, 0],\n        domain: [minPrice, maxPrice + 100]\n      });\n      return /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsxs(\"svg\", {\n          ref: function ref(s) {\n            return _this.svg = s;\n          },\n          width: parentWidth,\n          height: parentHeight,\n          children: [/*#__PURE__*/_jsx(LinearGradient, {\n            id: \"fill\",\n            from: \"#6086d6\",\n            to: \"#6086d6\",\n            fromOpacity: 0.2,\n            toOpacity: 0\n          }), /*#__PURE__*/_jsx(PatternLines, {\n            id: \"dLines\",\n            height: 6,\n            width: 6,\n            stroke: \"#27273f\",\n            strokeWidth: 1,\n            orientation: [\"diagonal\"]\n          }), /*#__PURE__*/_jsxs(Group, {\n            top: margin.top,\n            left: margin.left,\n            children: [/*#__PURE__*/_jsx(AxisBottom, {\n              data: data,\n              scale: xScale,\n              x: x,\n              top: height,\n              left: margin.left + 18,\n              numTicks: 3,\n              hideTicks: true,\n              hideAxisLine: true,\n              tickLabelComponent: /*#__PURE__*/_jsx(\"text\", {\n                fill: \"#ffffff\",\n                dy: \".33em\",\n                fillOpacity: 0.3,\n                fontSize: 11,\n                textAnchor: \"middle\"\n              })\n            }), /*#__PURE__*/_jsx(MaxPrice, {\n              data: maxData,\n              yText: yScale(maxPrice),\n              label: formatPrice(maxPrice),\n              yScale: yScale,\n              xScale: xScale,\n              x: x,\n              y: y\n            }), /*#__PURE__*/_jsx(AreaClosed, {\n              stroke: \"transparent\",\n              data: data,\n              yScale: yScale,\n              xScale: xScale,\n              x: x,\n              y: y,\n              fill: \"url(#fill)\"\n            }), /*#__PURE__*/_jsx(AreaClosed, {\n              stroke: \"transparent\",\n              data: data,\n              yScale: yScale,\n              xScale: xScale,\n              x: x,\n              y: y,\n              fill: \"url(#dLines)\"\n            }), /*#__PURE__*/_jsx(LinePath, {\n              data: data,\n              yScale: yScale,\n              xScale: xScale,\n              y: y,\n              x: x,\n              stroke: \"#6086d6\",\n              strokeOpacity: \"0.8\",\n              strokeWidth: 1\n            }), /*#__PURE__*/_jsx(MinPrice, {\n              data: minData,\n              yScale: yScale,\n              xScale: xScale,\n              y: y,\n              x: x,\n              yText: yScale(minPrice),\n              label: formatPrice(minPrice)\n            }), /*#__PURE__*/_jsx(Bar, {\n              data: data,\n              width: width,\n              height: height - margin.bottom,\n              fill: \"transparent\",\n              onMouseLeave: function onMouseLeave(data) {\n                return function (event) {\n                  return hideTooltip();\n                };\n              },\n              onMouseMove: function onMouseMove(data) {\n                return function (event) {\n                  var _localPoint = localPoint(_this.svg, event),\n                      xPoint = _localPoint.x;\n\n                  var x0 = xScale.invert(xPoint);\n                  var index = bisectDate(data, x0, 1);\n                  var d0 = data[index - 1];\n                  var d1 = data[index];\n                  var d = x0 - xScale(x(d0)) > xScale(x(d1)) - x0 ? d1 : d0;\n                  showTooltip({\n                    tooltipData: d,\n                    tooltipLeft: xScale(x(d)),\n                    tooltipTop: yScale(y(d))\n                  });\n                };\n              }\n            })]\n          }), tooltipData && /*#__PURE__*/_jsx(HoverLine, {\n            from: {\n              x: tooltipLeft,\n              y: yScale(y(maxData[0]))\n            },\n            to: {\n              x: tooltipLeft,\n              y: yScale(y(minData[0]))\n            },\n            tooltipLeft: tooltipLeft,\n            tooltipTop: tooltipTop\n          })]\n        }), tooltipData && /*#__PURE__*/_jsx(Tooltips, {\n          yTop: tooltipTop - 12,\n          yLeft: tooltipLeft + 12,\n          yLabel: formatPrice(y(tooltipData)),\n          xTop: yScale(y(minData[0])) + 4,\n          xLeft: tooltipLeft,\n          xLabel: formatDate(x(tooltipData))\n        })]\n      });\n    }\n  }]);\n\n  return Chart;\n}(React.Component);\n\nexport default withTooltip(Chart);","map":null,"metadata":{},"sourceType":"module"}